(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{320:function(e,n,t){"use strict";t.r(n);var a=t(442),o=t(443),i=t(441),r=t(122),l=t(349),c=t.n(l),s=t(71),p=t.n(s),d=t(72),m=t.n(d),f=t(103),u=t.n(f),g=t(165),h=t.n(g),v=t(121),b=t.n(v),w=t(403),x=t.n(w),y=t(138),C=t.n(y),E=t(131),N=t.n(E),k=t(1),F=t.n(k),O=t(23),S=t(70),I=t.n(S),B=t(446),j=function(){return(j=I.a||function(e){for(var n,t=1,a=arguments.length;t<a;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e}).apply(this,arguments)},P=function(e){var n="";switch(e){case 400:n="请求错误(400)";break;case 401:n="未授权，请重新登录(401)";break;case 402:n="拒绝访问(402)";break;case 404:n="请求出错(404)";break;case 408:n="请求超时(408)";break;case 500:n="服务器错误(500)";break;case 501:n="服务未实现(501)";break;case 502:n="网络错误(502)";break;case 503:n="服务不可用(503)";break;case 504:n="网络超时(504)";break;case 505:n="HTTP版本不受支持(505)";break;default:n="连接出错(".concat(e,")!")}return"".concat(n,"，请检查网络或联系管理员！")},T=B.a.create({headers:{get:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"},post:{"Content-Type":"application/x-www-form-urlencoded;charset=utf-8"}},withCredentials:!0,timeout:36e5,validateStatus:function(){return!0}});T.interceptors.request.use((function(e){return e.data=b()(e.data),"get"===e.method.toLowerCase()&&(e.params.t=+(new Date).getTime()),e.headers={"Content-Type":"application/json"},e}),(function(e){return e.message="服务器异常，请联系管理员！",c.a.reject(e)})),T.interceptors.response.use((function(e){var n=e.status,t="";return n<200||n>=300&&401!==n&&500!==n?(t=P(n),r.a.show(t),"string"==typeof e.data?e.data={message:t}:e.data.message=t,e):200===n?e.data:500===n?(t=P(n),r.a.show(t),e.data={message:t},e):void 0}),(function(e){return e.message="请求超时或服务器异常，请检查网络或联系管理员！",c.a.reject(e)}));var L=function(e){return T(e)};L.get=function(e,n,t){return void 0===n&&(n={}),void 0===t&&(t={}),e?T(j({url:e,method:"GET",params:n},t)):(console.error("path can not be empty"),c.a.reject("path can not be empty"))},L.post=function(e,n,t){return void 0===n&&(n={}),void 0===t&&(t={}),e?T(j({url:e,method:"POST",data:n},t)):(console.error("path can not be empty"),c.a.reject("path can not be empty"))};var z=L;window.axios=z;t(75);var U=t(445),A=t(21),D=t.n(A),J=t(422),H={insert:"head",singleton:!1},M=(D()(J.a,H),J.a.locals,t(369)),R=t(348),G=function(e){var n=e.beforeUpload,t=e.isPreview,a=e.setFileList,o=e.uploadFile;return F.a.createElement(F.a.Fragment,null,F.a.createElement("div",{className:"tips"},F.a.createElement("img",{src:"https://minaimg.wzkj.shop/minaImg/images/xzwdgs.png",alt:"",className:"bg-image"}),F.a.createElement("div",{className:"title"},"支持上传 ",F.a.createElement("span",{className:"color"}," Word 、PPT、PDF")," 格式文件"),F.a.createElement("div",{className:"btn"},F.a.createElement(M.a,{accept:"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/pdf",preview:t,beforeUpload:n,onChange:a,upload:o},F.a.createElement(R.a,{className:"choose",block:!0,shape:"rounded",color:"linear-gradient(143deg, #F7CC75, #F8B54F)"},"选择本地文件")))))};G.propTypes={};var W=G,q=t(435),K=t.n(q),Q=t(436),V={insert:"head",singleton:!1},X=(D()(Q.a,V),Q.a.locals,function(e){var n=e.isPreview,t=e.beforeUpload,a=e.setFileList,o=e.uploadFile;return F.a.createElement(F.a.Fragment,null,F.a.createElement("div",{className:"fileListBtns"},F.a.createElement(R.a,{className:"upload",size:"middle",shape:"rounded",fill:"outline"},F.a.createElement(M.a,{accept:"application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/pdf",preview:n,beforeUpload:t,onChange:a,upload:o},"上传文件")),F.a.createElement(R.a,{onClick:function(){K.a.miniProgram.getEnv((function(e){K.a.miniProgram.postMessage({data:{closeModal:!0}}),e.miniprogram&&K.a.miniProgram.navigateTo({url:"/path/to/page"})}))},className:"order",size:"middle",shape:"rounded"},"去下单")))}),Y=function(e,n,t,a){return new(t||(t=c.a))((function(o,i){function r(e){try{c(a.next(e))}catch(e){i(e)}}function l(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,l)}c((a=a.apply(e,n||[])).next())}))},Z=function(e,n){var t,a,o,i,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof p.a&&(i[m.a]=function(){return this}),i;function l(l){return function(c){return function(l){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,l[0]&&(r=0)),r;)try{if(t=1,a&&(o=2&l[0]?a.return:l[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,l[1])).done)return o;switch(a=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(!(o=r.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){r=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(6===l[0]&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=n.call(e,r)}catch(e){l=[6,e],a=0}finally{t=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},$=function(e,n,t){if(t||2===arguments.length)for(var a,o=0,i=n.length;o<i;o++)!a&&o in n||(a||(a=u()(Array.prototype).call(n,0,o)),a[o]=n[o]);return h()(e).call(e,a||u()(Array.prototype).call(n))},_=function(e){var n=Object(O.e)((function(e){return e.fileUpload})),t=n.ossParams,l=void 0===t?{}:t,c=n.fileList,s=n.limit,p=Object(O.e)((function(e){return e.global})).userInfo.unionId,d=Object(k.useState)([]),m=d[0],f=d[1],g=Object(k.useState)(1),h=g[0],v=(g[1],Object(O.d)());Object(k.useEffect)((function(){w(),y(),f($([],c,!0))}),[]),Object(k.useEffect)((function(){f($([],c,!0))}),[c]);var w=function(){v({type:"fileUpload/fetchOSSInfo",payload:{id:1}})},y=function(){return v({type:"fileUpload/fetchPrintFileList",payload:{unionId:p,page:h,limit:s}})},E=function(e){if(e.lengthComputable){var n=Math.floor(e.loaded/e.total*100);return n>100&&(n=100),n}},S=function(e){var n="",t="";return e&&("doc"===(n=e.substring(e.lastIndexOf(".")+1))||"docx"===n?t="word.png":"ppt"===n||"pptx"===n?t="ppt.png":"pdf"===n&&(t="pdf.png")),t},I=function(e){if(e&&e.length>12){var n,t=e.substring(e.lastIndexOf(".")+1);return u()(n=u()(e).call(e,0,e.lastIndexOf("."))).call(n,0,12)+"..."+t}return e},j={pulling:"用力拉",canRelease:"松开吧",refreshing:"玩命加载中...",complete:"好啦"},P={isPreview:!1,beforeUpload:function(e){var n=(e.name+"").toLowerCase();return-1===n.indexOf(".pdf")&&-1===n.indexOf(".docx")&&-1===n.indexOf(".doc")&&-1===n.indexOf(".ppt")&&-1===n.indexOf(".pptx")?(r.a.show("仅支持PDF、Word、PPT文件"),!1):e.size>10485760?(r.a.show("请选择小于 10M 的文件"),!1):e},setFileList:f,uploadFile:function(e){var n={};n.name=e.name,n.timeStamp=(new Date).getTime(),m.unshift(n);var t=new FormData;t.append("name",e.name),t.append("key","minaImg/images/upload/printFile/"+e.name),t.append("policy",l.policy),t.append("OSSAccessKeyId",l.accessid),t.append("signature",l.signature),t.append("file",e,e.name);try{return Object(B.a)({url:"https://minaimg.wzkj.shop",method:"post",onUploadProgress:function(t){n.percent=E(t.event),n.onErrorStatus=!1;for(var a=0;a<m.lengh;a++)m[a].name===e.name&&(m[a]=JSON.parse(b()(n)));f(JSON.parse(b()(m)))},data:t}).then((function(n){!function(e){var n=e.name,t=e.paperType,a=void 0===t?"A4":t,o=e.colorType,i=void 0===o?"黑白":o,r=e.singleOrDouble,l=void 0===r?"双面":r,c=e.pageCount,s=void 0===c?4:c,d=n.substring(n.lastIndexOf(".")+1),u="";"doc"===d||"docx"===d?u="word":"ppt"===d||"pptx"===d?u="ppt":"pdf"===d&&(u="pdf"),v({type:"fileUpload/recordFile",payload:{unionId:p,fileName:n,fileType:u,paperType:a,colorType:i,singleOrDouble:l,pageCount:s,filePath:"minaImg/images/upload/printFile/"+n}}).then((function(e){for(var n=e.data,t=0;t<m.length;t++)m[t].name===n.fileName&&void 0===m[t].id&&n.id&&(m[t]=n);f($([],m,!0))})).catch((function(e){return console.log(e)}))}(e)})).catch((function(t){r.a.show({icon:"fail",content:"文件上传失败，请重新上传"}),n.onErrorStatus=!0;for(var a=0;a<m.lengh;a++)m[a].name===e.name&&(m[a]=JSON.parse(b()(n)));f(JSON.parse(b()(m)))})),{url:x.a.createObjectURL(e),name:e.name}}catch(e){console.log(e)}}};return F.a.createElement("div",{className:"pageContent"},Array.isArray(m)&&0===m.length&&F.a.createElement(W,P),F.a.createElement(a.a,{onRefresh:function(){return Y(void 0,void 0,void 0,(function(){return Z(this,(function(e){return y(),[2]}))}))},renderText:function(e){return F.a.createElement("div",null,j[e])}},Array.isArray(m)&&m.length>0&&N()(m).call(m,(function(e,n){return e.percent<100?F.a.createElement("div",{className:"item",key:n},F.a.createElement("div",{className:"itemBlock"},F.a.createElement("div",{className:"itemIndex"},n),F.a.createElement("div",{className:"fileIcon"},F.a.createElement("img",{src:"https://minaimg.wzkj.shop/minaImg/images/"+S(e.name||e.filePath),alt:"",className:"iconImage"})),F.a.createElement("div",{className:"fileName"},F.a.createElement("div",{className:"name"},I(e.name||e.fileName)),F.a.createElement("div",{className:"progress"},(null==e?void 0:e.onErrorStatus)&&F.a.createElement(o.a,{percent:e.percent,text:!0,style:{"--fill-color":"#ee4433"}})||F.a.createElement(o.a,{percent:e.percent,text:!0,style:{"--fill-color":"#FFAB51"}})),(null==e?void 0:e.onErrorStatus)&&F.a.createElement("div",{className:"error"},"上传失败")))):F.a.createElement("div",{className:"item",key:n},!(null==e?void 0:e.onErrorStatus)&&F.a.createElement("div",{className:"close",onClick:function(){!function(e){var n=e.id,t=e.fileName;i.a.confirm({content:"是否删除".concat(t,"?"),onConfirm:function(){return Y(void 0,void 0,void 0,(function(){var e;return Z(this,(function(t){return e=C()(m).call(m,(function(e,t,a){return e.id!==n})),f(e),v({type:"fileUpload/deletePrintFile",payload:{unionId:p,deleteIds:n}}).then((function(e){r.a.show({icon:"success",content:"删除成功",position:"bottom"})})).catch((function(e){})),[2]}))}))},onCancel:function(){}})}(e)}},F.a.createElement(U.a,{fontSize:16})),F.a.createElement("div",{className:"itemBlock"},F.a.createElement("div",{className:"itemIndex"},n),F.a.createElement("div",{className:"fileIcon"},F.a.createElement("img",{src:"https://minaimg.wzkj.shop/minaImg/images/"+S(e.name||e.filePath),alt:"",className:"iconImage"})),F.a.createElement("div",{className:"fileName"},F.a.createElement("div",{className:"name"},I(e.name||e.fileName)),(null==e?void 0:e.onErrorStatus)&&F.a.createElement("div",{className:"error"},"上传失败")||F.a.createElement("div",{className:"pageNumber"},e.pageCount&&"共"+e.pageCount+"页"||"解析中..."))))}))),Array.isArray(m)&&m.length>0&&F.a.createElement(X,P))};_.propTypes={};n.default=_},422:function(e,n,t){"use strict";var a=t(22),o=t.n(a)()((function(e){return e[1]}));o.push([e.i,".pageContent {\n  background: #F8F8F8;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  overflow-y: scroll;\n  padding-bottom: 80px;\n}\n.pageContent .tips {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n}\n.pageContent .tips .bg-image {\n  width: 300px;\n  height: 192px;\n}\n.pageContent .tips .color {\n  color: #F8B54F;\n}\n.pageContent .tips .title {\n  text-align: center;\n  font-size: 13px;\n  font-family: Source Han Sans CN;\n  font-weight: 500;\n  color: #333333;\n}\n.pageContent .tips .btn {\n  text-align: center;\n  margin-top: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.pageContent .tips .btn .choose {\n  padding-left: 50px;\n  padding-right: 50px;\n  background: linear-gradient(143deg, #F7CC75, #F8B54F);\n}\n.pageContent .item {\n  position: relative;\n}\n.pageContent .item .close {\n  position: absolute;\n  right: 42px;\n  top: 8px;\n  width: 10px;\n}\n.pageContent .item .itemBlock {\n  width: 88%;\n  margin-left: 6%;\n  height: 100px;\n  background: #FFFFFF;\n  border-radius: 14px;\n  margin-top: 20px;\n  display: flex;\n  align-items: center;\n}\n.pageContent .item .itemBlock .itemIndex {\n  padding-left: 20px;\n  font-size: 16px;\n  font-family: Source Han Sans CN;\n  font-weight: 400;\n  color: #999999;\n}\n.pageContent .item .itemBlock .fileIcon {\n  padding-left: 20px;\n  padding-right: 10px;\n}\n.pageContent .item .itemBlock .fileIcon .iconImage {\n  width: 40px;\n  height: 40px;\n}\n.pageContent .item .itemBlock .fileName {\n  width: 100%;\n}\n.pageContent .item .itemBlock .fileName .name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  padding-right: 10px;\n  font-size: 17px;\n  font-family: Source Han Sans CN;\n  font-weight: 400;\n  color: #999999;\n}\n.pageContent .item .itemBlock .fileName .pageContent {\n  font-size: 17px;\n  font-family: Source Han Sans CN;\n  font-weight: 400;\n  color: #999999;\n}\n.pageContent .item .itemBlock .progress {\n  width: 100%;\n}\n.pageContent .item .itemBlock .error {\n  color: #e43;\n}\n.pageContent .fileListBtns {\n  height: 70px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: fixed;\n  bottom: 0;\n  background: #ffffff;\n}\n.pageContent .fileListBtns .upload {\n  border: 1px solid #b3b3b3;\n  margin-left: 50px;\n}\n.pageContent .fileListBtns .order {\n  color: #fff;\n  background: linear-gradient(143deg, #F7CC75, #F8B54F);\n  margin-right: 50px;\n  padding-right: 24px;\n  padding-left: 24px;\n  border: none;\n}\n.adm-image-uploader-cell {\n  display: none;\n}\n",""]),n.a=o},436:function(e,n,t){"use strict";var a=t(22),o=t.n(a)()((function(e){return e[1]}));o.push([e.i,".fileListBtns {\n  height: 70px;\n  width: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  position: fixed;\n  bottom: 0;\n  background: #ffffff;\n}\n.fileListBtns .upload {\n  border: 1px solid #b3b3b3;\n  margin-left: 50px;\n}\n.fileListBtns .order {\n  color: #fff;\n  background: linear-gradient(143deg, #F7CC75, #F8B54F);\n  margin-right: 50px;\n  padding-right: 24px;\n  padding-left: 24px;\n  border: none;\n}\n.adm-image-uploader-cell {\n  display: none;\n}\n.adm-space-horizontal > .adm-space-item {\n  margin-right: 0!important;\n}\n",""]),n.a=o}}]);